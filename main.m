%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Part1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 
input1 = imread('IMG_0123.jpg');
input1=rgb2gray(input1);
 
input2 = imread('IMG_0124.jpg');
input2=rgb2gray(input2);
 
W=[0,0,0; %A
    0,311,330; %C
    782,644,0; %Q
    0,644,330; %G
    782,916,330; %M
    782,327,0; %P
    782,932,330; %N
    782,327,330; %F
    0,916,330; %K
    0,932,330; %L
    0,327,330; %D
    782,644,330; %J
    0,644,330; %H
    782,644,330; %I
    782,311,330; %E
    782,0,0; %B
    0,327,0; %O
    ];
 
% figure(1);
% imshow(input1);
% [x1,y1]=ginput(17);
 
I1=[2028,3242; %A
    2401,2984; %C
    470,2058; %Q
    2495,2251; %G
    448,1447; %M
    484,2754; %P
    444,1396; %N
    460,3124; %F
    2556,1532; %K
    2572,1484; %L
    2412,2948; %D
    452,2260; %J
    2492,2204; %H
    460,2308; %I
    484,3164; %E
    500,3396; %B
    2084,2660; %O
    ];
 
% figure(2);
% imshow(input2);
% [x2,y2]=ginput(17);
 
I2=[2460,3404; %A
    2628,3180; %C
    820,2164; %Q
    2652,2364; %G
    508,1652; %M
    884,2788; %P
    500,1612; %N
    652,3108; %F
    2676,1564; %K
    2668,1516; %L
    2628,3124; %D
    564,2348; %J
    2652,2324; %H
    572,2404; %I
    652,3148; %E
    932,3364; %B
    2476,2780; %O
    ];
 
W_cal=W(1:6,:);
I1_cal=I1(1:6,:);
I2_cal=I2(1:6,:);
 
CamMat1=Calibration(W_cal,I1_cal);
CamMat2=Calibration(W_cal,I2_cal);
 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Part2 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 
Result_Coordinates = Fun_3D_Coordinates(CamMat1,CamMat2,I1,I2);
Residuals=W-Result_Coordinates;
